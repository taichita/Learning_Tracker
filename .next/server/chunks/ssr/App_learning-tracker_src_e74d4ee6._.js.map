{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/MonthSidebar.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { ChevronLeft, ChevronRight, Calendar } from 'lucide-react'\n\ninterface MonthSidebarProps {\n  selectedMonth: string\n  onMonthSelect: (month: string) => void\n}\n\nexport function MonthSidebar({ selectedMonth, onMonthSelect }: MonthSidebarProps) {\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear())\n\n  const months = [\n    '1月', '2月', '3月', '4月', '5月', '6月',\n    '7月', '8月', '9月', '10月', '11月', '12月'\n  ]\n\n  const handleMonthClick = (monthIndex: number) => {\n    const monthStr = `${currentYear}-${String(monthIndex + 1).padStart(2, '0')}`\n    onMonthSelect(monthStr)\n  }\n\n  const handlePrevYear = () => setCurrentYear(currentYear - 1)\n  const handleNextYear = () => setCurrentYear(currentYear + 1)\n\n  const isSelectedMonth = (monthIndex: number) => {\n    const monthStr = `${currentYear}-${String(monthIndex + 1).padStart(2, '0')}`\n    return selectedMonth === monthStr\n  }\n\n  return (\n    <div className=\"w-64 bg-card border-r border-border h-full flex flex-col\">\n      {/* Year Navigation */}\n      <div className=\"p-4 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <button \n            onClick={handlePrevYear}\n            className=\"p-2 hover:bg-background rounded-lg transition-colors\"\n            aria-label=\"前年\"\n          >\n            <ChevronLeft size={16} />\n          </button>\n          <h2 className=\"text-lg font-semibold text-center min-w-0\">\n            {currentYear}年\n          </h2>\n          <button \n            onClick={handleNextYear}\n            className=\"p-2 hover:bg-background rounded-lg transition-colors\"\n            aria-label=\"次年\"\n          >\n            <ChevronRight size={16} />\n          </button>\n        </div>\n      </div>\n\n      {/* Month List */}\n      <div className=\"flex-1 p-4 overflow-y-auto\">\n        <div className=\"space-y-2\">\n          {months.map((month, index) => (\n            <button\n              key={index}\n              onClick={() => handleMonthClick(index)}\n              className={`w-full text-left px-4 py-3 rounded-2xl transition-all duration-200 ${\n                isSelectedMonth(index)\n                  ? 'gradient-accent text-white shadow-lg'\n                  : 'hover:bg-background border border-transparent hover:border-border'\n              }`}\n            >\n              <div className=\"flex items-center gap-3\">\n                <Calendar size={16} className=\"opacity-70\" />\n                <span className=\"font-medium\">{month}</span>\n              </div>\n            </button>\n          ))}\n        </div>\n\n        {/* Uncategorized Section */}\n        <div className=\"mt-8 pt-4 border-t border-border\">\n          <button\n            onClick={() => onMonthSelect('uncategorized')}\n            className={`w-full text-left px-4 py-3 rounded-2xl transition-all duration-200 ${\n              selectedMonth === 'uncategorized'\n                ? 'gradient-accent text-white shadow-lg'\n                : 'hover:bg-background border border-transparent hover:border-border'\n            }`}\n          >\n            <div className=\"flex items-center gap-3\">\n              <Calendar size={16} className=\"opacity-70\" />\n              <span className=\"font-medium\">未分類</span>\n            </div>\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAUO,SAAS,aAAa,EAAE,aAAa,EAAE,aAAa,EAAqB;IAC9E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+OAAQ,EAAC,IAAI,OAAO,WAAW;IAErE,MAAM,SAAS;QACb;QAAM;QAAM;QAAM;QAAM;QAAM;QAC9B;QAAM;QAAM;QAAM;QAAO;QAAO;KACjC;IAED,MAAM,mBAAmB,CAAC;QACxB,MAAM,WAAW,GAAG,YAAY,CAAC,EAAE,OAAO,aAAa,GAAG,QAAQ,CAAC,GAAG,MAAM;QAC5E,cAAc;IAChB;IAEA,MAAM,iBAAiB,IAAM,eAAe,cAAc;IAC1D,MAAM,iBAAiB,IAAM,eAAe,cAAc;IAE1D,MAAM,kBAAkB,CAAC;QACvB,MAAM,WAAW,GAAG,YAAY,CAAC,EAAE,OAAO,aAAa,GAAG,QAAQ,CAAC,GAAG,MAAM;QAC5E,OAAO,kBAAkB;IAC3B;IAEA,qBACE,4QAAC;QAAI,WAAU;;0BAEb,4QAAC;gBAAI,WAAU;0BACb,cAAA,4QAAC;oBAAI,WAAU;;sCACb,4QAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,4QAAC,iQAAW;gCAAC,MAAM;;;;;;;;;;;sCAErB,4QAAC;4BAAG,WAAU;;gCACX;gCAAY;;;;;;;sCAEf,4QAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,4QAAC,oQAAY;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;0BAM1B,4QAAC;gBAAI,WAAU;;kCACb,4QAAC;wBAAI,WAAU;kCACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,4QAAC;gCAEC,SAAS,IAAM,iBAAiB;gCAChC,WAAW,CAAC,mEAAmE,EAC7E,gBAAgB,SACZ,yCACA,qEACJ;0CAEF,cAAA,4QAAC;oCAAI,WAAU;;sDACb,4QAAC,oPAAQ;4CAAC,MAAM;4CAAI,WAAU;;;;;;sDAC9B,4QAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;+BAV5B;;;;;;;;;;kCAiBX,4QAAC;wBAAI,WAAU;kCACb,cAAA,4QAAC;4BACC,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,mEAAmE,EAC7E,kBAAkB,kBACd,yCACA,qEACJ;sCAEF,cAAA,4QAAC;gCAAI,WAAU;;kDACb,4QAAC,oPAAQ;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC9B,4QAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/store/useAppStore.ts"],"sourcesContent":["'use client'\n\nimport { create } from 'zustand'\nimport { immer } from 'zustand/middleware/immer'\nimport { subscribeWithSelector } from 'zustand/middleware'\nimport { ContentItem, ItemDetails, AppState, UndoableAction } from '@/types'\n\ninterface AppStoreState extends AppState {\n  // Actions\n  addItem: (item: ContentItem) => void\n  updateItem: (id: string, updates: Partial<ContentItem>) => void\n  deleteItem: (id: string) => void\n  \n  // Item Details Actions\n  updateItemDetails: (itemId: string, details: Partial<ItemDetails>) => void\n  addWorkIdea: (itemId: string, text: string) => void\n  updateWorkIdea: (itemId: string, ideaId: string, updates: Partial<any>) => void\n  deleteWorkIdea: (itemId: string, ideaId: string) => void\n  reorderWorkIdeas: (itemId: string, from: number, to: number) => void\n  \n  addLearning: (itemId: string, text: string) => void\n  updateLearning: (itemId: string, learningId: string, updates: Partial<BulletPoint>) => void\n  deleteLearning: (itemId: string, learningId: string) => void\n  reorderLearnings: (itemId: string, from: number, to: number) => void\n  \n  // UI State Actions\n  setSelectedItem: (itemId: string | null) => void\n  setSelectedMonth: (month: string) => void\n  \n  // Undo/Redo Actions\n  undo: () => void\n  redo: () => void\n  canUndo: () => boolean\n  canRedo: () => boolean\n  \n  // Helper to create undoable actions\n  executeUndoable: (action: () => void, inverse: () => void) => void\n}\n\n// Mock data\nconst mockItems: ContentItem[] = [\n  {\n    id: '1',\n    userId: 'user1',\n    kind: 'book',\n    title: 'ゼロからの経済学',\n    creators: ['山田太郎'],\n    date: '2025-08-20',\n    amazonUrl: 'https://www.amazon.co.jp/dp/XXXX',\n    notebooklmUrl: 'https://notebooklm.google.com/...',\n    rating: 8,\n    oneLiner: '価格とインセンティブ設計の基礎を再確認。',\n    tags: ['経済', '価格戦略', 'ビジネス'],\n    status: 'done',\n    createdAt: '2025-08-20T10:12:00Z',\n    updatedAt: '2025-08-20T10:12:00Z'\n  },\n  {\n    id: '2',\n    userId: 'user1',\n    kind: 'video',\n    title: 'React最新機能解説',\n    creators: ['佐藤花子'],\n    date: '2025-08-22',\n    rating: 9,\n    oneLiner: 'Suspenseとコンカレント機能の実装パターンが理解できた',\n    tags: ['React', 'JavaScript', 'プログラミング'],\n    status: 'in_progress',\n    createdAt: '2025-08-22T09:30:00Z',\n    updatedAt: '2025-08-22T09:30:00Z'\n  }\n]\n\nconst mockItemDetails: Record<string, ItemDetails> = {\n  '1': {\n    id: 'detail1',\n    itemId: '1',\n    workIdeas: [\n      { id: 'idea1', text: '自社の料金テストをABで週次実施', checked: false, order: 0 },\n      { id: 'idea2', text: 'セグメント別価格設定の導入検討', checked: true, order: 1 }\n    ],\n    learnings: [\n      { id: 'learn1', text: '価格弾力性はセグメント別に測定する', order: 0 },\n      { id: 'learn2', text: '消費者心理と価格設定の重要性', order: 1 }\n    ],\n    longNote: '# 需要曲線と価格差別について\\n\\n価格設定において最も重要なのは、顧客セグメントごとの価格弾力性を正確に把握することである。',\n    highlights: [\n      {\n        id: 'high1',\n        quote: '価格はメッセージである',\n        note: 'プロモーション設計の指針として使える',\n        source: 'p.42'\n      }\n    ],\n    links: [\n      { label: '講演スライド', url: 'https://example.com/slides' }\n    ],\n    version: 1,\n    updatedAt: new Date().toISOString()\n  },\n  '2': {\n    id: 'detail2',\n    itemId: '2',\n    workIdeas: [\n      { id: 'idea3', text: 'Suspenseを活用したローディング状態の改善', checked: false, order: 0 }\n    ],\n    learnings: [\n      { id: 'learn3', text: 'React 18の並行レンダリングは段階的に導入可能', order: 0 }\n    ],\n    longNote: '# React 18の新機能について\\n\\nSuspenseとコンカレント機能により、ユーザー体験が大幅に改善される。',\n    highlights: [],\n    links: [],\n    version: 1,\n    updatedAt: new Date().toISOString()\n  }\n}\n\nconst generateId = () => Math.random().toString(36).substr(2, 9)\n\nexport const useAppStore = create<AppStoreState>()(\n  subscribeWithSelector(\n    immer((set, get) => ({\n      // Initial State\n      items: mockItems,\n      itemDetails: mockItemDetails,\n      selectedMonth: (() => {\n        const now = new Date()\n        return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`\n      })(),\n      selectedItem: null,\n      undoStack: [],\n      redoStack: [],\n\n      // Item Actions\n      addItem: (item) => {\n        const action = () => {\n          set((state) => {\n            state.items.push({ ...item, id: generateId() })\n          })\n        }\n        \n        const inverse = () => {\n          set((state) => {\n            const index = state.items.findIndex(i => i.id === item.id)\n            if (index >= 0) {\n              state.items.splice(index, 1)\n            }\n          })\n        }\n        \n        get().executeUndoable(action, inverse)\n      },\n\n      updateItem: (id, updates) => {\n        const currentItem = get().items.find(item => item.id === id)\n        if (!currentItem) return\n\n        const action = () => {\n          set((state) => {\n            const item = state.items.find(i => i.id === id)\n            if (item) {\n              Object.assign(item, updates)\n              item.updatedAt = new Date().toISOString()\n            }\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            const item = state.items.find(i => i.id === id)\n            if (item) {\n              Object.assign(item, currentItem)\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      deleteItem: (id) => {\n        const itemToDelete = get().items.find(item => item.id === id)\n        const detailsToDelete = get().itemDetails[id]\n        if (!itemToDelete) return\n\n        const action = () => {\n          set((state) => {\n            const index = state.items.findIndex(i => i.id === id)\n            if (index >= 0) {\n              state.items.splice(index, 1)\n            }\n            delete state.itemDetails[id]\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            state.items.push(itemToDelete)\n            if (detailsToDelete) {\n              state.itemDetails[id] = detailsToDelete\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      // Item Details Actions\n      updateItemDetails: (itemId, details) => {\n        const currentDetails = get().itemDetails[itemId]\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) {\n              state.itemDetails[itemId] = {\n                id: generateId(),\n                itemId,\n                workIdeas: [],\n                learnings: [],\n                longNote: '',\n                highlights: [],\n                links: [],\n                version: 1,\n                updatedAt: new Date().toISOString()\n              }\n            }\n            Object.assign(state.itemDetails[itemId], details)\n            state.itemDetails[itemId].updatedAt = new Date().toISOString()\n            state.itemDetails[itemId].version += 1\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (currentDetails) {\n              state.itemDetails[itemId] = currentDetails\n            } else {\n              delete state.itemDetails[itemId]\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      addWorkIdea: (itemId, text) => {\n        const newIdea = {\n          id: generateId(),\n          text,\n          checked: false,\n          order: get().itemDetails[itemId]?.workIdeas.length || 0\n        }\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            state.itemDetails[itemId].workIdeas.push(newIdea)\n            state.itemDetails[itemId].updatedAt = new Date().toISOString()\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const index = state.itemDetails[itemId].workIdeas.findIndex(i => i.id === newIdea.id)\n            if (index >= 0) {\n              state.itemDetails[itemId].workIdeas.splice(index, 1)\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      updateWorkIdea: (itemId, ideaId, updates) => {\n        const currentIdea = get().itemDetails[itemId]?.workIdeas.find(i => i.id === ideaId)\n        if (!currentIdea) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const idea = state.itemDetails[itemId].workIdeas.find(i => i.id === ideaId)\n            if (idea) {\n              Object.assign(idea, updates)\n              state.itemDetails[itemId].updatedAt = new Date().toISOString()\n            }\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const idea = state.itemDetails[itemId].workIdeas.find(i => i.id === ideaId)\n            if (idea) {\n              Object.assign(idea, currentIdea)\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      deleteWorkIdea: (itemId, ideaId) => {\n        const ideaToDelete = get().itemDetails[itemId]?.workIdeas.find(i => i.id === ideaId)\n        if (!ideaToDelete) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const index = state.itemDetails[itemId].workIdeas.findIndex(i => i.id === ideaId)\n            if (index >= 0) {\n              state.itemDetails[itemId].workIdeas.splice(index, 1)\n              state.itemDetails[itemId].updatedAt = new Date().toISOString()\n            }\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            state.itemDetails[itemId].workIdeas.push(ideaToDelete)\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      reorderWorkIdeas: (itemId, from, to) => {\n        const ideas = get().itemDetails[itemId]?.workIdeas\n        if (!ideas || from === to) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const ideas = state.itemDetails[itemId].workIdeas\n            const [movedIdea] = ideas.splice(from, 1)\n            ideas.splice(to, 0, movedIdea)\n            \n            // Update order values\n            ideas.forEach((idea, index) => {\n              idea.order = index\n            })\n            \n            state.itemDetails[itemId].updatedAt = new Date().toISOString()\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const ideas = state.itemDetails[itemId].workIdeas\n            const [movedIdea] = ideas.splice(to, 1)\n            ideas.splice(from, 0, movedIdea)\n            \n            // Restore order values\n            ideas.forEach((idea, index) => {\n              idea.order = index\n            })\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      // Similar implementations for learnings\n      addLearning: (itemId, text) => {\n        const newLearning = {\n          id: generateId(),\n          text,\n          order: get().itemDetails[itemId]?.learnings.length || 0\n        }\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            state.itemDetails[itemId].learnings.push(newLearning)\n            state.itemDetails[itemId].updatedAt = new Date().toISOString()\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const index = state.itemDetails[itemId].learnings.findIndex(i => i.id === newLearning.id)\n            if (index >= 0) {\n              state.itemDetails[itemId].learnings.splice(index, 1)\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      updateLearning: (itemId, learningId, updates) => {\n        const currentLearning = get().itemDetails[itemId]?.learnings.find(l => l.id === learningId)\n        if (!currentLearning) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const learning = state.itemDetails[itemId].learnings.find(l => l.id === learningId)\n            if (learning) {\n              Object.assign(learning, updates)\n              state.itemDetails[itemId].updatedAt = new Date().toISOString()\n            }\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const learning = state.itemDetails[itemId].learnings.find(l => l.id === learningId)\n            if (learning) {\n              Object.assign(learning, currentLearning)\n            }\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      deleteLearning: (itemId, learningId) => {\n        const learningToDelete = get().itemDetails[itemId]?.learnings.find(l => l.id === learningId)\n        if (!learningToDelete) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const index = state.itemDetails[itemId].learnings.findIndex(l => l.id === learningId)\n            if (index >= 0) {\n              state.itemDetails[itemId].learnings.splice(index, 1)\n              state.itemDetails[itemId].updatedAt = new Date().toISOString()\n            }\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            state.itemDetails[itemId].learnings.push(learningToDelete)\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      reorderLearnings: (itemId, from, to) => {\n        const learnings = get().itemDetails[itemId]?.learnings\n        if (!learnings || from === to) return\n\n        const action = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const learnings = state.itemDetails[itemId].learnings\n            const [movedLearning] = learnings.splice(from, 1)\n            learnings.splice(to, 0, movedLearning)\n            \n            // Update order values\n            learnings.forEach((learning, index) => {\n              learning.order = index\n            })\n            \n            state.itemDetails[itemId].updatedAt = new Date().toISOString()\n          })\n        }\n\n        const inverse = () => {\n          set((state) => {\n            if (!state.itemDetails[itemId]) return\n            const learnings = state.itemDetails[itemId].learnings\n            const [movedLearning] = learnings.splice(to, 1)\n            learnings.splice(from, 0, movedLearning)\n            \n            // Restore order values\n            learnings.forEach((learning, index) => {\n              learning.order = index\n            })\n          })\n        }\n\n        get().executeUndoable(action, inverse)\n      },\n\n      // UI State Actions\n      setSelectedItem: (itemId) => {\n        set((state) => {\n          state.selectedItem = itemId\n        })\n      },\n\n      setSelectedMonth: (month) => {\n        set((state) => {\n          state.selectedMonth = month\n        })\n      },\n\n      // Undo/Redo Actions\n      executeUndoable: (action, inverse) => {\n        set((state) => {\n          // Save current state for undo\n          state.undoStack.push(JSON.parse(JSON.stringify({\n            items: state.items,\n            itemDetails: state.itemDetails\n          })))\n          \n          // Clear redo stack when new action is performed\n          state.redoStack = []\n          \n          // Limit undo stack size\n          if (state.undoStack.length > 100) {\n            state.undoStack.shift()\n          }\n        })\n        \n        action()\n      },\n\n      undo: () => {\n        const state = get()\n        if (state.undoStack.length === 0) return\n\n        set((currentState) => {\n          // Save current state to redo stack\n          currentState.redoStack.push(JSON.parse(JSON.stringify({\n            items: currentState.items,\n            itemDetails: currentState.itemDetails\n          })))\n          \n          // Restore previous state\n          const previousState = currentState.undoStack.pop()!\n          currentState.items = previousState.items\n          currentState.itemDetails = previousState.itemDetails\n        })\n      },\n\n      redo: () => {\n        const state = get()\n        if (state.redoStack.length === 0) return\n\n        set((currentState) => {\n          // Save current state to undo stack\n          currentState.undoStack.push(JSON.parse(JSON.stringify({\n            items: currentState.items,\n            itemDetails: currentState.itemDetails\n          })))\n          \n          // Restore next state\n          const nextState = currentState.redoStack.pop()!\n          currentState.items = nextState.items\n          currentState.itemDetails = nextState.itemDetails\n        })\n      },\n\n      canUndo: () => get().undoStack.length > 0,\n      canRedo: () => get().redoStack.length > 0,\n    }))\n  )\n)"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 710, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/AmazonSuggestions.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { Search, ExternalLink, Book } from 'lucide-react'\n\ninterface AmazonSuggestionsProps {\n  query: string\n  onSelect: (item: AmazonItem) => void\n  onClose: () => void\n}\n\ninterface AmazonItem {\n  title: string\n  author: string\n  url: string\n  image?: string\n  price?: string\n}\n\n// Generate Amazon search suggestions that link to real Amazon search pages\nconst generateAmazonSearchSuggestions = async (query: string): Promise<AmazonItem[]> => {\n  // Simulate slight delay for UX\n  await new Promise(resolve => setTimeout(resolve, 200))\n  \n  if (!query.trim() || query.length < 2) {\n    return []\n  }\n  \n  const suggestions: AmazonItem[] = [\n    {\n      title: `「${query}」で検索`,\n      author: 'Amazon.co.jp',\n      url: `https://www.amazon.co.jp/s?k=${encodeURIComponent(query)}&ref=nb_sb_noss`,\n      price: ''\n    },\n    {\n      title: `「${query} 本」で検索`,\n      author: 'Amazon.co.jp - 本',\n      url: `https://www.amazon.co.jp/s?k=${encodeURIComponent(query + ' 本')}&i=stripbooks&ref=nb_sb_noss`,\n      price: ''\n    },\n    {\n      title: `「${query} Kindle」で検索`, \n      author: 'Amazon.co.jp - Kindle',\n      url: `https://www.amazon.co.jp/s?k=${encodeURIComponent(query)}&i=digital-text&ref=nb_sb_noss`,\n      price: ''\n    }\n  ]\n  \n  return suggestions\n}\n\nexport function AmazonSuggestions({ query, onSelect, onClose }: AmazonSuggestionsProps) {\n  const [suggestions, setSuggestions] = useState<AmazonItem[]>([])\n  const [loading, setLoading] = useState(false)\n  const [selectedIndex, setSelectedIndex] = useState(0)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const searchAmazon = async () => {\n      if (query.length < 2) {\n        setSuggestions([])\n        return\n      }\n\n      setLoading(true)\n      try {\n        const results = await generateAmazonSearchSuggestions(query)\n        setSuggestions(results)\n        setSelectedIndex(0)\n      } catch (error) {\n        console.error('Amazon search error:', error)\n        setSuggestions([])\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    const debounceTimer = setTimeout(searchAmazon, 300)\n    return () => clearTimeout(debounceTimer)\n  }, [query])\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!suggestions.length) return\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault()\n          setSelectedIndex(prev => prev < suggestions.length - 1 ? prev + 1 : 0)\n          break\n        case 'ArrowUp':\n          e.preventDefault()\n          setSelectedIndex(prev => prev > 0 ? prev - 1 : suggestions.length - 1)\n          break\n        case 'Enter':\n          e.preventDefault()\n          if (suggestions[selectedIndex]) {\n            onSelect(suggestions[selectedIndex])\n          }\n          break\n        case 'Escape':\n          onClose()\n          break\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [suggestions, selectedIndex, onSelect, onClose])\n\n  if (!query || query.length < 2) return null\n\n  return (\n    <div \n      ref={containerRef}\n      className=\"absolute z-50 w-full mt-1 bg-card border border-border rounded-lg shadow-xl max-h-80 overflow-y-auto\"\n    >\n      {loading ? (\n        <div className=\"p-4 text-center text-gray-500\">\n          <div className=\"flex items-center justify-center gap-2\">\n            <Search size={16} className=\"animate-spin\" />\n            Amazon で検索中...\n          </div>\n        </div>\n      ) : suggestions.length > 0 ? (\n        <div className=\"py-2\">\n          <div className=\"px-3 py-1 text-xs text-gray-500 border-b border-border bg-background\">\n            Amazon 検索結果\n          </div>\n          {suggestions.map((item, index) => (\n            <button\n              key={index}\n              onClick={() => onSelect(item)}\n              className={`w-full text-left p-3 hover:bg-background transition-colors ${\n                index === selectedIndex ? 'bg-background' : ''\n              }`}\n            >\n              <div className=\"flex items-start gap-3\">\n                <div className=\"flex-shrink-0 mt-1\">\n                  <Book size={16} className=\"text-cyan-300\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"font-medium text-white text-sm line-clamp-2 mb-1\">\n                    {item.title}\n                  </div>\n                  <div className=\"text-xs text-gray-400 mb-1\">\n                    著者: {item.author}\n                  </div>\n                  {item.price && (\n                    <div className=\"text-xs text-cyan-300 font-medium\">\n                      {item.price}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-shrink-0\">\n                  <ExternalLink size={12} className=\"text-gray-500\" />\n                </div>\n              </div>\n            </button>\n          ))}\n          <div className=\"px-3 py-2 text-xs text-gray-500 border-t border-border bg-background\">\n            ↑↓ で選択、Enter で決定、Esc で閉じる\n          </div>\n        </div>\n      ) : (\n        <div className=\"p-4 text-center text-gray-500\">\n          <div className=\"flex items-center justify-center gap-2\">\n            <Search size={16} />\n            「{query}」の検索結果が見つかりませんでした\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 982, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/NewItemDialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { X, Plus, Book, Video, FileText } from 'lucide-react'\nimport { ContentKind, ContentStatus } from '@/types'\nimport { useAppStore } from '@/store/useAppStore'\nimport { AmazonSuggestions } from './AmazonSuggestions'\n\ninterface NewItemDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  initialKind?: ContentKind\n}\n\nexport function NewItemDialog({ isOpen, onClose, initialKind = 'book' }: NewItemDialogProps) {\n  const [formData, setFormData] = useState({\n    kind: initialKind,\n    title: '',\n    creators: '',\n    date: new Date().toISOString().split('T')[0], // デフォルトで今日の日付\n    amazonUrl: '',\n    notebooklmUrl: '',\n    rating: '',\n    oneLiner: '',\n    tags: '',\n    status: 'done' as ContentStatus\n  })\n  const [showAmazonSuggestions, setShowAmazonSuggestions] = useState(false)\n  const titleInputRef = useRef<HTMLInputElement>(null)\n\n  const addItem = useAppStore((state) => state.addItem)\n  const undo = useAppStore((state) => state.undo)\n  const redo = useAppStore((state) => state.redo)\n  const canUndo = useAppStore((state) => state.canUndo)\n  const canRedo = useAppStore((state) => state.canRedo)\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!formData.title.trim()) {\n      alert('タイトルを入力してください')\n      return\n    }\n\n    const newItem = {\n      id: Math.random().toString(36).substr(2, 9),\n      userId: 'user1',\n      kind: formData.kind as ContentKind,\n      title: formData.title.trim(),\n      creators: formData.creators.split(',').map(c => c.trim()).filter(Boolean),\n      date: formData.date || undefined,\n      amazonUrl: formData.amazonUrl || undefined,\n      notebooklmUrl: formData.notebooklmUrl || undefined,\n      rating: formData.rating ? parseInt(formData.rating) : undefined,\n      oneLiner: formData.oneLiner || undefined,\n      tags: formData.tags.split(',').map(t => t.trim()).filter(Boolean),\n      status: formData.status,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    }\n\n    addItem(newItem)\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setFormData({\n      kind: 'book',\n      title: '',\n      creators: '',\n      date: new Date().toISOString().split('T')[0],\n      amazonUrl: '',\n      notebooklmUrl: '',\n      rating: '',\n      oneLiner: '',\n      tags: '',\n      status: 'done'\n    })\n    setShowAmazonSuggestions(false)\n    onClose()\n  }\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const title = e.target.value\n    setFormData(prev => ({ ...prev, title }))\n    \n    // Show Amazon suggestions for books when typing\n    if (formData.kind === 'book' && title.length >= 2) {\n      setShowAmazonSuggestions(true)\n    } else {\n      setShowAmazonSuggestions(false)\n    }\n  }\n\n  const handleAmazonSelect = (item: { title: string; author: string; url: string }) => {\n    setFormData(prev => ({\n      ...prev,\n      title: item.title,\n      creators: item.author,\n      amazonUrl: item.url\n    }))\n    setShowAmazonSuggestions(false)\n  }\n\n  // ダイアログが開いているときのキーボードショートカット\n  useEffect(() => {\n    if (!isOpen) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.ctrlKey || e.metaKey) {\n        switch (e.key.toLowerCase()) {\n          case 'z':\n            if (e.shiftKey) {\n              // Ctrl+Shift+Z または Cmd+Shift+Z\n              if (canRedo()) {\n                e.preventDefault()\n                redo()\n              }\n            } else {\n              // Ctrl+Z または Cmd+Z\n              if (canUndo()) {\n                e.preventDefault()\n                undo()\n              }\n            }\n            break\n          case 'y':\n            // Ctrl+Y または Cmd+Y\n            if (canRedo()) {\n              e.preventDefault()\n              redo()\n            }\n            break\n        }\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [isOpen, undo, redo, canUndo, canRedo])\n\n  if (!isOpen) return null\n\n  const kindOptions = [\n    { value: 'book', label: '書籍', icon: Book, color: 'text-blue-400' },\n    { value: 'video', label: '動画', icon: Video, color: 'text-red-400' },\n    { value: 'article', label: '記事', icon: FileText, color: 'text-green-400' }\n  ]\n\n  const statusOptions = [\n    { value: 'done', label: '完了' },\n    { value: 'in_progress', label: '進行中' },\n    { value: 'planned', label: '予定' }\n  ]\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-card border border-border rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-border\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-xl font-bold\">新しい学習記録を追加</h2>\n            <button \n              onClick={handleClose}\n              className=\"p-2 hover:bg-background rounded-lg transition-colors\"\n            >\n              <X size={20} />\n            </button>\n          </div>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Kind Selection */}\n          <div>\n            <label className=\"block text-sm font-medium mb-3\">種別</label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              {kindOptions.map((option) => {\n                const Icon = option.icon\n                return (\n                  <button\n                    key={option.value}\n                    type=\"button\"\n                    onClick={() => {\n                      setFormData(prev => ({ ...prev, kind: option.value as ContentKind }))\n                      setShowAmazonSuggestions(false)\n                    }}\n                    className={`p-4 border-2 rounded-xl transition-all flex flex-col items-center gap-2 ${\n                      formData.kind === option.value\n                        ? 'border-accent-purple bg-accent-purple bg-opacity-10'\n                        : 'border-border hover:border-accent-purple hover:border-opacity-50'\n                    }`}\n                  >\n                    <Icon size={24} className={option.color} />\n                    <span className=\"text-sm font-medium\">{option.label}</span>\n                  </button>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Title */}\n          <div className=\"relative\">\n            <label className=\"block text-sm font-medium mb-2\">\n              タイトル <span className=\"text-red-400\">*</span>\n              {formData.kind === 'book' && (\n                <span className=\"text-xs text-cyan-400 ml-2\">\n                  ※ 入力するとAmazon検索候補が表示されます\n                </span>\n              )}\n            </label>\n            <input\n              ref={titleInputRef}\n              type=\"text\"\n              value={formData.title}\n              onChange={handleTitleChange}\n              onBlur={() => {\n                // Delay hiding suggestions to allow clicking\n                setTimeout(() => setShowAmazonSuggestions(false), 200)\n              }}\n              onFocus={() => {\n                if (formData.kind === 'book' && formData.title.length >= 2) {\n                  setShowAmazonSuggestions(true)\n                }\n              }}\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none transition-all\"\n              placeholder=\"タイトルを入力...\"\n              required\n            />\n            {showAmazonSuggestions && (\n              <AmazonSuggestions\n                query={formData.title}\n                onSelect={handleAmazonSelect}\n                onClose={() => setShowAmazonSuggestions(false)}\n              />\n            )}\n          </div>\n\n          {/* Creators */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">作者・クリエイター</label>\n            <input\n              type=\"text\"\n              value={formData.creators}\n              onChange={(e) => setFormData(prev => ({ ...prev, creators: e.target.value }))}\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n              placeholder=\"カンマ区切りで入力（例：山田太郎, 佐藤花子）\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-6\">\n            {/* Date */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">完了日</label>\n              <input\n                type=\"date\"\n                value={formData.date}\n                onChange={(e) => setFormData(prev => ({ ...prev, date: e.target.value }))}\n                max={new Date().toISOString().split('T')[0]}\n                defaultValue={new Date().toISOString().split('T')[0]}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">本日: {new Date().toLocaleDateString('ja-JP')}</p>\n            </div>\n\n            {/* Rating */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">評価（1-10）</label>\n              <select\n                value={formData.rating}\n                onChange={(e) => setFormData(prev => ({ ...prev, rating: e.target.value }))}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all appearance-none cursor-pointer\"\n              >\n                <option value=\"\">未評価</option>\n                {Array.from({ length: 10 }, (_, i) => i + 1).map(num => (\n                  <option key={num} value={num}>{num}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Status */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">進捗状況</label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              {statusOptions.map((option) => (\n                <button\n                  key={option.value}\n                  type=\"button\"\n                  onClick={() => setFormData(prev => ({ ...prev, status: option.value as ContentStatus }))}\n                  className={`p-3 border-2 rounded-xl transition-all text-sm font-medium ${\n                    formData.status === option.value\n                      ? 'border-accent-purple bg-accent-purple bg-opacity-10'\n                      : 'border-border hover:border-accent-purple hover:border-opacity-50'\n                  }`}\n                >\n                  {option.label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* One-liner */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">ひと言まとめ</label>\n            <input\n              type=\"text\"\n              value={formData.oneLiner}\n              onChange={(e) => setFormData(prev => ({ ...prev, oneLiner: e.target.value }))}\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n              placeholder=\"学んだことを一言で...\"\n              maxLength={120}\n            />\n          </div>\n\n          {/* Tags */}\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">タグ</label>\n            <input\n              type=\"text\"\n              value={formData.tags}\n              onChange={(e) => setFormData(prev => ({ ...prev, tags: e.target.value }))}\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n              placeholder=\"カンマ区切りで入力（例：経済学, ビジネス, 価格戦略）\"\n            />\n          </div>\n\n          {/* URLs */}\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Amazon URL</label>\n              <input\n                type=\"url\"\n                value={formData.amazonUrl}\n                onChange={(e) => setFormData(prev => ({ ...prev, amazonUrl: e.target.value }))}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n                placeholder=\"https://www.amazon.co.jp/dp/...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">NotebookLM URL</label>\n              <input\n                type=\"url\"\n                value={formData.notebooklmUrl}\n                onChange={(e) => setFormData(prev => ({ ...prev, notebooklmUrl: e.target.value }))}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-xl focus:ring-2 focus:ring-accent-purple focus:border-transparent outline-none transition-all\"\n                placeholder=\"https://notebooklm.google.com/...\"\n              />\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"space-y-3 pt-4\">\n            <div className=\"flex gap-3\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"flex-1 px-6 py-3 border border-border rounded-xl hover:bg-background transition-colors\"\n              >\n                キャンセル\n              </button>\n              <button\n                type=\"submit\"\n                className=\"flex-1 px-6 py-3 gradient-accent text-white rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-2\"\n              >\n                <Plus size={16} />\n                追加\n              </button>\n            </div>\n            <div className=\"flex items-center justify-between text-xs text-gray-500\">\n              <span>\n                Undo: Ctrl+Z {canUndo() ? '✓' : '✗'} | Redo: Ctrl+Y {canRedo() ? '✓' : '✗'}\n              </span>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/MainTable.tsx"],"sourcesContent":["'use client'\n\nimport { ContentKind, ContentStatus } from '@/types'\nimport { Book, Video, FileText, ExternalLink, Star, Plus, Trash2 } from 'lucide-react'\nimport { useAppStore } from '@/store/useAppStore'\nimport { useState } from 'react'\nimport { NewItemDialog } from './NewItemDialog'\n\ninterface MainTableProps {\n  selectedMonth: string\n  selectedItem: string | null\n  onItemSelect: (itemId: string | null) => void\n}\n\nexport function MainTable({ selectedMonth, selectedItem, onItemSelect }: MainTableProps) {\n  const items = useAppStore((state) => state.items)\n  const itemDetails = useAppStore((state) => state.itemDetails)\n  const deleteItem = useAppStore((state) => state.deleteItem)\n  const [isNewItemDialogOpen, setIsNewItemDialogOpen] = useState(false)\n\n  const getKindIcon = (kind: ContentKind) => {\n    switch (kind) {\n      case 'book':\n        return <Book size={12} className=\"text-cyan-300\" />\n      case 'video':\n        return <Video size={12} className=\"text-blue-300\" />\n      case 'article':\n        return <FileText size={12} className=\"text-sky-300\" />\n    }\n  }\n\n  const getStatusBadge = (status: ContentStatus) => {\n    const styles = {\n      done: 'bg-cyan-900/70 text-cyan-100 border-cyan-600/50',\n      in_progress: 'bg-blue-900/70 text-blue-100 border-blue-600/50',\n      planned: 'bg-slate-800/70 text-slate-100 border-slate-600/50'\n    }\n\n    const labels = {\n      done: '完了',\n      in_progress: '進行中',\n      planned: '予定'\n    }\n\n    return (\n      <span className={`px-1 py-0.5 text-xs font-semibold rounded border ${styles[status]} backdrop-blur-sm leading-none`}>\n        {labels[status]}\n      </span>\n    )\n  }\n\n  const renderRating = (rating?: number) => {\n    if (!rating) return <span className=\"text-slate-500 text-xs font-medium\">-</span>\n    \n    return (\n      <div className=\"flex items-center gap-0.5\">\n        <Star size={8} className=\"text-yellow-300 fill-current\" />\n        <span className=\"text-xs font-bold text-white leading-none\">{rating}/10</span>\n      </div>\n    )\n  }\n\n  const renderTags = (tags: string[]) => {\n    const displayTags = tags.slice(0, 3)\n    const remainingCount = Math.max(0, tags.length - 3)\n\n    return (\n      <div className=\"flex items-center gap-0.5 flex-wrap\">\n        {displayTags.map((tag, index) => (\n          <span \n            key={index}\n            className=\"px-1 py-0.5 text-xs bg-gradient-to-r from-cyan-900/60 to-blue-900/60 text-cyan-100 rounded border border-cyan-500/40 font-semibold backdrop-blur-sm leading-none\"\n          >\n            {tag}\n          </span>\n        ))}\n        {remainingCount > 0 && (\n          <span className=\"px-1 py-0.5 text-xs bg-slate-800/60 text-slate-200 rounded border border-slate-600/40 font-semibold leading-none\">\n            +{remainingCount}\n          </span>\n        )}\n      </div>\n    )\n  }\n\n  const renderMemoIndicator = (itemId: string) => {\n    const details = itemDetails[itemId]\n    if (!details) return null\n    \n    const ideaCount = details.workIdeas.length\n    const learningCount = details.learnings.length\n    \n    if (ideaCount === 0 && learningCount === 0) return null\n    \n    return (\n      <div className=\"flex items-center gap-0.5\">\n        {ideaCount > 0 && (\n          <span className=\"px-1 py-0.5 text-xs bg-cyan-900/70 text-cyan-100 rounded border border-cyan-600/50 font-bold min-w-[18px] text-center leading-none\">\n            {ideaCount}\n          </span>\n        )}\n        {learningCount > 0 && (\n          <span className=\"px-1 py-0.5 text-xs bg-blue-900/70 text-blue-100 rounded border border-blue-600/50 font-bold min-w-[18px] text-center leading-none\">\n            {learningCount}\n          </span>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h1 className=\"text-2xl font-bold\">学習記録</h1>\n          <button\n            onClick={() => setIsNewItemDialogOpen(true)}\n            className=\"flex items-center gap-2 px-4 py-2 gradient-accent text-white rounded-xl hover:opacity-90 transition-opacity\"\n          >\n            <Plus size={16} />\n            新規追加\n          </button>\n        </div>\n        <p className=\"text-foreground opacity-70\">\n          {selectedMonth === 'uncategorized' ? '未分類のアイテム' : `${selectedMonth.replace('-', '年')}月の記録`}\n        </p>\n      </div>\n\n      {/* Table Container */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"min-w-full\">\n          {/* Table Body */}\n          <div className=\"divide-y divide-border\">\n            {items.map((item) => (\n              <div \n                key={item.id}\n                className={`grid grid-cols-13 gap-1.5 px-2 py-1 hover:bg-card transition-colors group ${\n                  selectedItem === item.id ? 'bg-card ring-1 ring-cyan-400 ring-opacity-40' : ''\n                }`}\n              >\n                {/* Kind */}\n                <div className=\"col-span-1 flex items-center\">\n                  <div className=\"flex items-center gap-2\">\n                    {getKindIcon(item.kind)}\n                    {item.amazonUrl && (\n                      <button \n                        className=\"text-orange-400 hover:text-orange-300 transition-colors\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          window.open(item.amazonUrl, '_blank')\n                        }}\n                        title=\"Amazon\"\n                      >\n                        <ExternalLink size={12} />\n                      </button>\n                    )}\n                    {item.notebooklmUrl && (\n                      <button \n                        className=\"text-green-400 hover:text-green-300 transition-colors\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          window.open(item.notebooklmUrl, '_blank')\n                        }}\n                        title=\"NotebookLM\"\n                      >\n                        <ExternalLink size={12} />\n                      </button>\n                    )}\n                  </div>\n                </div>\n\n                {/* Title & Creators */}\n                <div className=\"col-span-3 min-w-0\">\n                  <div className=\"font-bold text-white text-xs line-clamp-1 leading-none\">\n                    {item.title}\n                  </div>\n                  <div className=\"text-xs text-slate-400 font-medium leading-none truncate\">\n                    {item.creators.join(', ')}\n                  </div>\n                </div>\n\n                {/* Rating */}\n                <div className=\"col-span-1 flex items-center\">\n                  {renderRating(item.rating)}\n                </div>\n\n                {/* One-liner */}\n                <div className=\"col-span-3 flex items-center min-w-0\">\n                  <p className=\"text-xs text-slate-200 font-medium line-clamp-1 truncate leading-none\">\n                    {item.oneLiner || '—'}\n                  </p>\n                </div>\n\n                {/* Tags */}\n                <div className=\"col-span-2 flex items-center\">\n                  {renderTags(item.tags)}\n                </div>\n\n                {/* Status */}\n                <div className=\"col-span-1 flex items-center\">\n                  {getStatusBadge(item.status)}\n                </div>\n\n                {/* Memo Indicator */}\n                <div className=\"col-span-1 flex items-center\">\n                  {renderMemoIndicator(item.id)}\n                </div>\n\n                {/* Actions */}\n                <div className=\"col-span-1 flex items-center gap-1\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onItemSelect(selectedItem === item.id ? null : item.id)\n                    }}\n                    className=\"p-0.5 hover:bg-cyan-900/50 rounded opacity-0 group-hover:opacity-100 transition-all\"\n                    title=\"詳細表示\"\n                  >\n                    <ExternalLink size={8} className=\"text-cyan-300\" />\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      if (confirm(`「${item.title}」を削除しますか？`)) {\n                        if (selectedItem === item.id) {\n                          onItemSelect(null)\n                        }\n                        deleteItem(item.id)\n                      }\n                    }}\n                    className=\"p-0.5 hover:bg-red-900/50 rounded text-red-300 hover:text-red-200 opacity-0 group-hover:opacity-100 transition-all\"\n                    title=\"削除\"\n                  >\n                    <Trash2 size={8} />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* New Item Dialog */}\n      <NewItemDialog\n        isOpen={isNewItemDialogOpen}\n        onClose={() => setIsNewItemDialogOpen(false)}\n      />\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2177, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/LongNoteEditor.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef } from 'react'\nimport { Edit2, Save, X } from 'lucide-react'\nimport { useAppStore } from '@/store/useAppStore'\n\ninterface LongNoteEditorProps {\n  itemId: string\n  initialNote: string\n}\n\nexport function LongNoteEditor({ itemId, initialNote }: LongNoteEditorProps) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [noteText, setNoteText] = useState(initialNote)\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false)\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n  \n  const updateItemDetails = useAppStore((state) => state.updateItemDetails)\n\n  const handleStartEdit = () => {\n    setNoteText(initialNote)\n    setIsEditing(true)\n    setHasUnsavedChanges(false)\n    setTimeout(() => {\n      textareaRef.current?.focus()\n    }, 100)\n  }\n\n  const handleSave = () => {\n    updateItemDetails(itemId, { longNote: noteText })\n    setIsEditing(false)\n    setHasUnsavedChanges(false)\n  }\n\n  const handleCancel = () => {\n    if (hasUnsavedChanges) {\n      if (confirm('保存されていない変更があります。破棄しますか？')) {\n        setNoteText(initialNote)\n        setIsEditing(false)\n        setHasUnsavedChanges(false)\n      }\n    } else {\n      setNoteText(initialNote)\n      setIsEditing(false)\n      setHasUnsavedChanges(false)\n    }\n  }\n\n  const handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setNoteText(e.target.value)\n    setHasUnsavedChanges(e.target.value !== initialNote)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // Prevent global shortcuts when editing\n    e.stopPropagation()\n    \n    if (e.key === 'Escape') {\n      handleCancel()\n    } else if (e.key === 's' && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault()\n      handleSave()\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold\">長文ノート</h3>\n        {!isEditing ? (\n          <button \n            onClick={handleStartEdit}\n            className=\"flex items-center gap-2 px-3 py-1 text-sm bg-cyan-600 text-white rounded hover:bg-cyan-700 transition-colors\"\n          >\n            <Edit2 size={14} />\n            編集\n          </button>\n        ) : (\n          <div className=\"flex items-center gap-2\">\n            <button \n              onClick={handleSave}\n              className=\"flex items-center gap-2 px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\n            >\n              <Save size={14} />\n              保存 (Ctrl+S)\n            </button>\n            <button \n              onClick={handleCancel}\n              className=\"flex items-center gap-2 px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\n            >\n              <X size={14} />\n              キャンセル (Esc)\n            </button>\n          </div>\n        )}\n      </div>\n      \n      {isEditing ? (\n        <div className=\"space-y-2\">\n          <div className=\"relative\">\n            <textarea\n              ref={textareaRef}\n              value={noteText}\n              onChange={handleTextChange}\n              onKeyDown={handleKeyDown}\n              className=\"w-full h-96 p-4 bg-card border border-border rounded-lg resize-none font-mono text-sm focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none\"\n              placeholder=\"Markdownでノートを記述...\"\n            />\n            {hasUnsavedChanges && (\n              <div className=\"absolute top-2 right-2\">\n                <span className=\"px-2 py-1 text-xs bg-amber-600 text-white rounded\">\n                  未保存\n                </span>\n              </div>\n            )}\n          </div>\n          <div className=\"text-xs text-gray-500\">\n            📝 Ctrl+S で保存、Esc でキャンセル\n          </div>\n        </div>\n      ) : (\n        <div className=\"p-4 bg-card rounded-lg border border-border min-h-[200px]\">\n          {initialNote ? (\n            <div className=\"prose prose-sm prose-invert max-w-none\">\n              <pre className=\"whitespace-pre-wrap text-sm leading-relaxed font-serif\">\n                {initialNote}\n              </pre>\n            </div>\n          ) : (\n            <div className=\"text-gray-500 text-sm italic text-center py-12\">\n              まだノートが作成されていません。<br />\n              「編集」ボタンをクリックして作成してください。\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAWO,SAAS,eAAe,EAAE,MAAM,EAAE,WAAW,EAAuB;IACzE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+OAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+OAAQ,EAAC;IACzC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,+OAAQ,EAAC;IAC3D,MAAM,cAAc,IAAA,6OAAM,EAAsB;IAEhD,MAAM,oBAAoB,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,iBAAiB;IAExE,MAAM,kBAAkB;QACtB,YAAY;QACZ,aAAa;QACb,qBAAqB;QACrB,WAAW;YACT,YAAY,OAAO,EAAE;QACvB,GAAG;IACL;IAEA,MAAM,aAAa;QACjB,kBAAkB,QAAQ;YAAE,UAAU;QAAS;QAC/C,aAAa;QACb,qBAAqB;IACvB;IAEA,MAAM,eAAe;QACnB,IAAI,mBAAmB;YACrB,IAAI,QAAQ,4BAA4B;gBACtC,YAAY;gBACZ,aAAa;gBACb,qBAAqB;YACvB;QACF,OAAO;YACL,YAAY;YACZ,aAAa;YACb,qBAAqB;QACvB;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,YAAY,EAAE,MAAM,CAAC,KAAK;QAC1B,qBAAqB,EAAE,MAAM,CAAC,KAAK,KAAK;IAC1C;IAEA,MAAM,gBAAgB,CAAC;QACrB,wCAAwC;QACxC,EAAE,eAAe;QAEjB,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB;QACF,OAAO,IAAI,EAAE,GAAG,KAAK,OAAO,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,GAAG;YACpD,EAAE,cAAc;YAChB;QACF;IACF;IAEA,qBACE,4QAAC;;0BACC,4QAAC;gBAAI,WAAU;;kCACb,4QAAC;wBAAG,WAAU;kCAAwB;;;;;;oBACrC,CAAC,0BACA,4QAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,4QAAC,yOAAK;gCAAC,MAAM;;;;;;4BAAM;;;;;;6CAIrB,4QAAC;wBAAI,WAAU;;0CACb,4QAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,4QAAC,wOAAI;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAGpB,4QAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,4QAAC,+NAAC;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;YAOtB,0BACC,4QAAC;gBAAI,WAAU;;kCACb,4QAAC;wBAAI,WAAU;;0CACb,4QAAC;gCACC,KAAK;gCACL,OAAO;gCACP,UAAU;gCACV,WAAW;gCACX,WAAU;gCACV,aAAY;;;;;;4BAEb,mCACC,4QAAC;gCAAI,WAAU;0CACb,cAAA,4QAAC;oCAAK,WAAU;8CAAoD;;;;;;;;;;;;;;;;;kCAM1E,4QAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;qCAKzC,4QAAC;gBAAI,WAAU;0BACZ,4BACC,4QAAC;oBAAI,WAAU;8BACb,cAAA,4QAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;yCAIL,4QAAC;oBAAI,WAAU;;wBAAiD;sCAC9C,4QAAC;;;;;wBAAK;;;;;;;;;;;;;;;;;;AAQpC","debugId":null}},
    {"offset": {"line": 2421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/RightDrawer.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { X, Edit2, ExternalLink, Plus, Trash2, GripVertical } from 'lucide-react'\nimport { BulletPoint, Highlight, Link } from '@/types'\nimport { useAppStore } from '@/store/useAppStore'\nimport { LongNoteEditor } from './LongNoteEditor'\n\ninterface RightDrawerProps {\n  itemId: string\n  onClose: () => void\n}\n\ntype TabType = 'overview' | 'ideas' | 'learnings' | 'notes' | 'highlights' | 'links'\n\nexport function RightDrawer({ itemId, onClose }: RightDrawerProps) {\n  const [activeTab, setActiveTab] = useState<TabType>('overview')\n  const [isEditing, setIsEditing] = useState(false)\n  const drawerRef = useRef<HTMLDivElement>(null)\n  \n  // Zustand store\n  const item = useAppStore((state) => state.items.find(i => i.id === itemId))\n  const itemDetails = useAppStore((state) => state.itemDetails[itemId])\n  const updateWorkIdea = useAppStore((state) => state.updateWorkIdea)\n  const deleteWorkIdea = useAppStore((state) => state.deleteWorkIdea)\n  const addWorkIdea = useAppStore((state) => state.addWorkIdea)\n  const addLearning = useAppStore((state) => state.addLearning)\n  const deleteLearning = useAppStore((state) => state.deleteLearning)\n  const updateItemDetails = useAppStore((state) => state.updateItemDetails)\n\n  const tabs = [\n    { id: 'overview', label: '概要', icon: '📋' },\n    { id: 'ideas', label: 'アイデア', icon: '💡' },\n    { id: 'learnings', label: '学び', icon: '📚' },\n    { id: 'notes', label: 'ノート', icon: '📝' },\n    { id: 'highlights', label: '引用', icon: '🔖' },\n    { id: 'links', label: 'リンク', icon: '🔗' }\n  ] as const\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose()\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [onClose])\n\n  const BulletPointList = ({ \n    points, \n    type,\n    hasCheckboxes = false \n  }: { \n    points: BulletPoint[]\n    type: 'ideas' | 'learnings'\n    hasCheckboxes?: boolean \n  }) => {\n    const [editingId, setEditingId] = useState<string | null>(null)\n    const [editingText, setEditingText] = useState('')\n    const [newItemText, setNewItemText] = useState('')\n    const [isAddingNew, setIsAddingNew] = useState(false)\n\n    const handleEdit = (point: BulletPoint) => {\n      setEditingId(point.id)\n      setEditingText(point.text)\n    }\n\n    const handleSaveEdit = () => {\n      if (editingId && editingText.trim()) {\n        if (type === 'ideas') {\n          updateWorkIdea(itemId, editingId, { text: editingText.trim() })\n        } else {\n          const updateLearning = useAppStore.getState().updateLearning\n          updateLearning(itemId, editingId, { text: editingText.trim() })\n        }\n      }\n      setEditingId(null)\n      setEditingText('')\n    }\n\n    const handleCancelEdit = () => {\n      setEditingId(null)\n      setEditingText('')\n    }\n\n    const handleAddNew = () => {\n      if (newItemText.trim()) {\n        if (type === 'ideas') {\n          addWorkIdea(itemId, newItemText.trim())\n        } else {\n          addLearning(itemId, newItemText.trim())\n        }\n        setNewItemText('')\n        setIsAddingNew(false)\n      }\n    }\n\n    const handleCancelAdd = () => {\n      setNewItemText('')\n      setIsAddingNew(false)\n    }\n\n    return (\n      <div className=\"space-y-2\">\n        {points.map((point) => (\n          <div key={point.id} className=\"group flex items-start gap-3 p-3 rounded-lg border border-border hover:bg-card transition-colors\">\n            <div className=\"flex items-center gap-2\">\n              <GripVertical size={14} className=\"text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab\" />\n              {hasCheckboxes && (\n                <input\n                  type=\"checkbox\"\n                  checked={point.checked || false}\n                  className=\"rounded border-gray-300 text-accent-purple focus:ring-accent-purple focus:ring-offset-0\"\n                  onChange={(e) => {\n                    updateWorkIdea(itemId, point.id, { checked: e.target.checked })\n                  }}\n                />\n              )}\n            </div>\n            <div className=\"flex-1\">\n              {editingId === point.id ? (\n                <div className=\"space-y-2\">\n                  <input\n                    type=\"text\"\n                    value={editingText}\n                    onChange={(e) => setEditingText(e.target.value)}\n                    onKeyDown={(e) => {\n                      e.stopPropagation()\n                      if (e.key === 'Enter' && e.ctrlKey) {\n                        handleSaveEdit()\n                      } else if (e.key === 'Escape') {\n                        handleCancelEdit()\n                      }\n                    }}\n                    className=\"w-full px-2 py-1 text-sm bg-background border border-border rounded focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none\"\n                    autoFocus\n                  />\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={handleSaveEdit}\n                      className=\"px-2 py-1 text-xs bg-cyan-600 text-white rounded hover:bg-cyan-700 transition-colors\"\n                    >\n                      保存 (Ctrl+Enter)\n                    </button>\n                    <button\n                      onClick={handleCancelEdit}\n                      className=\"px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\n                    >\n                      キャンセル (Esc)\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <p \n                  className={`text-sm cursor-pointer hover:bg-background/50 px-1 py-0.5 rounded ${point.checked ? 'line-through opacity-60' : ''}`}\n                  onClick={() => handleEdit(point)}\n                  title=\"クリックで編集\"\n                >\n                  {point.text}\n                </p>\n              )}\n            </div>\n            <div className=\"flex gap-1\">\n              <button \n                className=\"opacity-0 group-hover:opacity-100 p-1 hover:bg-cyan-900/50 rounded transition-all\"\n                onClick={() => handleEdit(point)}\n                title=\"編集\"\n              >\n                <Edit2 size={12} className=\"text-cyan-300\" />\n              </button>\n              <button \n                className=\"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-900/50 rounded transition-all\"\n                onClick={() => {\n                  if (type === 'ideas') {\n                    deleteWorkIdea(itemId, point.id)\n                  } else {\n                    deleteLearning(itemId, point.id)\n                  }\n                }}\n                title=\"削除\"\n              >\n                <Trash2 size={12} className=\"text-red-300\" />\n              </button>\n            </div>\n          </div>\n        ))}\n        \n        {isAddingNew ? (\n          <div className=\"p-3 border-2 border-dashed border-cyan-500/50 rounded-lg bg-card/50\">\n            <div className=\"space-y-2\">\n              <input\n                type=\"text\"\n                value={newItemText}\n                onChange={(e) => setNewItemText(e.target.value)}\n                onKeyDown={(e) => {\n                  e.stopPropagation()\n                  if (e.key === 'Enter' && e.ctrlKey) {\n                    handleAddNew()\n                  } else if (e.key === 'Escape') {\n                    handleCancelAdd()\n                  }\n                }}\n                className=\"w-full px-3 py-2 text-sm bg-background border border-border rounded-lg focus:ring-2 focus:ring-cyan-400 focus:border-transparent outline-none\"\n                placeholder={`新しい${type === 'ideas' ? 'アイデア' : '学び'}を入力...`}\n                autoFocus\n              />\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={handleAddNew}\n                  disabled={!newItemText.trim()}\n                  className=\"px-3 py-1 text-xs bg-cyan-600 text-white rounded hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  追加 (Ctrl+Enter)\n                </button>\n                <button\n                  onClick={handleCancelAdd}\n                  className=\"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\n                >\n                  キャンセル (Esc)\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <button \n            onClick={() => setIsAddingNew(true)}\n            className=\"w-full p-3 border-2 border-dashed border-border hover:border-cyan-500 hover:bg-cyan-500/5 rounded-lg transition-colors text-sm text-gray-400 hover:text-cyan-300 flex items-center justify-center gap-2\"\n          >\n            <Plus size={16} />\n            新しい{type === 'ideas' ? 'アイデア' : '学び'}を追加\n          </button>\n        )}\n      </div>\n    )\n  }\n\n  const HighlightsList = ({ highlights }: { highlights: Highlight[] }) => (\n    <div className=\"space-y-4\">\n      {highlights.map((highlight) => (\n        <div key={highlight.id} className=\"p-4 bg-card rounded-lg border border-border\">\n          <blockquote className=\"border-l-4 border-accent-purple pl-4 italic text-foreground mb-3\">\n            \"{highlight.quote}\"\n          </blockquote>\n          {highlight.source && (\n            <p className=\"text-sm text-gray-500 mb-2\">出典: {highlight.source}</p>\n          )}\n          {highlight.note && (\n            <p className=\"text-sm text-foreground opacity-80\">{highlight.note}</p>\n          )}\n          {highlight.timestamp && (\n            <p className=\"text-xs text-gray-500 mt-2\">タイムスタンプ: {highlight.timestamp}</p>\n          )}\n        </div>\n      ))}\n      <button className=\"w-full p-3 border-2 border-dashed border-border hover:border-accent-purple hover:bg-accent-purple hover:bg-opacity-5 rounded-lg transition-colors text-sm text-gray-500 hover:text-accent-purple flex items-center justify-center gap-2\">\n        <Plus size={16} />\n        新しい引用を追加\n      </button>\n    </div>\n  )\n\n  const LinksList = ({ links }: { links: Link[] }) => (\n    <div className=\"space-y-2\">\n      {links.map((link, index) => (\n        <div key={index} className=\"group flex items-center gap-3 p-3 bg-card rounded-lg border border-border hover:bg-background transition-colors\">\n          <ExternalLink size={16} className=\"text-accent-blue flex-shrink-0\" />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-foreground truncate\">{link.label}</p>\n            <p className=\"text-xs text-gray-500 truncate\">{link.url}</p>\n          </div>\n          <button \n            onClick={() => window.open(link.url, '_blank')}\n            className=\"opacity-0 group-hover:opacity-100 px-3 py-1 bg-accent-blue text-white text-xs rounded hover:bg-blue-600 transition-all\"\n          >\n            開く\n          </button>\n        </div>\n      ))}\n      <button className=\"w-full p-3 border-2 border-dashed border-border hover:border-accent-purple hover:bg-accent-purple hover:bg-opacity-5 rounded-lg transition-colors text-sm text-gray-500 hover:text-accent-purple flex items-center justify-center gap-2\">\n        <Plus size={16} />\n        新しいリンクを追加\n      </button>\n    </div>\n  )\n\n  const renderTabContent = () => {\n    if (!item || !itemDetails) return (\n      <div className=\"flex items-center justify-center h-full text-gray-500\">\n        <p>データが見つかりません</p>\n      </div>\n    )\n\n    switch (activeTab) {\n      case 'overview':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">基本情報</h3>\n              <div className=\"space-y-3\">\n                <div className=\"p-4 bg-card rounded-lg\">\n                  <p className=\"text-sm text-gray-500 mb-1\">タイトル</p>\n                  <p className=\"font-medium\">{item.title}</p>\n                </div>\n                <div className=\"p-4 bg-card rounded-lg\">\n                  <p className=\"text-sm text-gray-500 mb-1\">作者・クリエイター</p>\n                  <p>{item.creators.join(', ')}</p>\n                </div>\n                {item.date && (\n                  <div className=\"p-4 bg-card rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">完了日</p>\n                    <p>{new Date(item.date).toLocaleDateString('ja-JP')}</p>\n                  </div>\n                )}\n                <div className=\"p-4 bg-card rounded-lg\">\n                  <p className=\"text-sm text-gray-500 mb-1\">評価</p>\n                  <p>{item.rating ? `${item.rating}/10` : '未評価'}</p>\n                </div>\n                {item.oneLiner && (\n                  <div className=\"p-4 bg-card rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">ひと言まとめ</p>\n                    <p>{item.oneLiner}</p>\n                  </div>\n                )}\n                {item.tags.length > 0 && (\n                  <div className=\"p-4 bg-card rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">タグ</p>\n                    <div className=\"flex flex-wrap gap-2 mt-2\">\n                      {item.tags.map((tag, index) => (\n                        <span \n                          key={index}\n                          className=\"px-2 py-1 text-xs bg-accent-purple bg-opacity-20 text-accent-purple rounded-lg\"\n                        >\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )\n      case 'ideas':\n        return (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">仕事に生かせそうなネタ</h3>\n              <span className=\"text-sm text-gray-500\">{itemDetails.workIdeas.length}件</span>\n            </div>\n            <BulletPointList points={itemDetails.workIdeas} type=\"ideas\" hasCheckboxes />\n          </div>\n        )\n      case 'learnings':\n        return (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">学んだこと</h3>\n              <span className=\"text-sm text-gray-500\">{itemDetails.learnings.length}件</span>\n            </div>\n            <BulletPointList points={itemDetails.learnings} type=\"learnings\" />\n          </div>\n        )\n      case 'notes':\n        return <LongNoteEditor itemId={itemId} initialNote={itemDetails.longNote} />\n      case 'highlights':\n        return (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">引用・ハイライト</h3>\n              <span className=\"text-sm text-gray-500\">{itemDetails.highlights.length}件</span>\n            </div>\n            <HighlightsList highlights={itemDetails.highlights} />\n          </div>\n        )\n      case 'links':\n        return (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">関連リンク</h3>\n              <span className=\"text-sm text-gray-500\">{itemDetails.links.length}件</span>\n            </div>\n            <LinksList links={itemDetails.links} />\n          </div>\n        )\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div \n      ref={drawerRef}\n      className=\"w-96 bg-background border-l border-border h-full flex flex-col animate-drawer-open\"\n    >\n      {/* Header */}\n      <div className=\"p-6 border-b border-border bg-card\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-bold\">詳細情報</h2>\n          <button \n            onClick={onClose}\n            className=\"p-2 hover:bg-background rounded-lg transition-colors\"\n            aria-label=\"閉じる\"\n          >\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex flex-wrap gap-1\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as TabType)}\n              className={`flex items-center gap-2 px-3 py-2 text-xs rounded-lg transition-all ${\n                activeTab === tab.id\n                  ? 'gradient-accent text-white shadow-sm'\n                  : 'text-foreground opacity-70 hover:opacity-100 hover:bg-background'\n              }`}\n            >\n              <span className=\"text-sm\">{tab.icon}</span>\n              <span>{tab.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-6\">\n        {renderTabContent()}\n      </div>\n\n      {/* Footer */}\n      {itemDetails && (\n        <div className=\"p-4 border-t border-border bg-card\">\n          <div className=\"flex items-center justify-between text-xs text-gray-500\">\n            <span>最終更新: {new Date(itemDetails.updatedAt).toLocaleDateString('ja-JP')}</span>\n            <span>v{itemDetails.version}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3475, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/components/CommandPalette.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { \n  Search, \n  Plus, \n  Calendar, \n  Download, \n  Upload, \n  Palette, \n  Book, \n  Video, \n  FileText,\n  Command\n} from 'lucide-react'\n\ninterface Command {\n  id: string\n  label: string\n  description?: string\n  icon: React.ReactNode\n  action: () => void\n  keywords?: string[]\n}\n\ninterface CommandPaletteProps {\n  isOpen: boolean\n  onClose: () => void\n  onNewItem?: () => void\n}\n\nexport function CommandPalette({ isOpen, onClose, onNewItem }: CommandPaletteProps) {\n  const [query, setQuery] = useState('')\n  const [selectedIndex, setSelectedIndex] = useState(0)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const listRef = useRef<HTMLDivElement>(null)\n\n  const commands: Command[] = [\n    {\n      id: 'new-item',\n      label: '新規学習記録を追加',\n      description: '書籍・動画・記事の学習記録を作成します',\n      icon: <Plus size={16} className=\"text-blue-400\" />,\n      action: () => {\n        onNewItem?.()\n        onClose()\n      },\n      keywords: ['新規', '追加', 'add', '書籍', '動画', '記事', 'book', 'video', 'article']\n    },\n    {\n      id: 'search',\n      label: '検索',\n      description: '学習記録を検索します',\n      icon: <Search size={16} className=\"text-gray-400\" />,\n      action: () => {\n        console.log('検索')\n        onClose()\n      },\n      keywords: ['検索', 'search', '探す']\n    },\n    {\n      id: 'jump-current-month',\n      label: '今月にジャンプ',\n      description: '現在の月の記録を表示します',\n      icon: <Calendar size={16} className=\"text-purple-400\" />,\n      action: () => {\n        console.log('今月にジャンプ')\n        onClose()\n      },\n      keywords: ['今月', 'current', 'month', 'ジャンプ', 'jump']\n    },\n    {\n      id: 'jump-january',\n      label: '1月にジャンプ',\n      icon: <Calendar size={16} className=\"text-purple-400\" />,\n      action: () => {\n        console.log('1月にジャンプ')\n        onClose()\n      },\n      keywords: ['1月', 'january', '一月', 'ジャンプ', 'jump']\n    },\n    {\n      id: 'jump-february',\n      label: '2月にジャンプ',\n      icon: <Calendar size={16} className=\"text-purple-400\" />,\n      action: () => {\n        console.log('2月にジャンプ')\n        onClose()\n      },\n      keywords: ['2月', 'february', '二月', 'ジャンプ', 'jump']\n    },\n    {\n      id: 'jump-march',\n      label: '3月にジャンプ',\n      icon: <Calendar size={16} className=\"text-purple-400\" />,\n      action: () => {\n        console.log('3月にジャンプ')\n        onClose()\n      },\n      keywords: ['3月', 'march', '三月', 'ジャンプ', 'jump']\n    },\n    {\n      id: 'export',\n      label: 'データをエクスポート',\n      description: 'JSON形式でデータを書き出します',\n      icon: <Download size={16} className=\"text-green-400\" />,\n      action: () => {\n        console.log('エクスポート')\n        onClose()\n      },\n      keywords: ['エクスポート', 'export', '書き出し', 'download']\n    },\n    {\n      id: 'import',\n      label: 'データをインポート',\n      description: 'JSON形式のデータを読み込みます',\n      icon: <Upload size={16} className=\"text-blue-400\" />,\n      action: () => {\n        console.log('インポート')\n        onClose()\n      },\n      keywords: ['インポート', 'import', '読み込み', 'upload']\n    },\n    {\n      id: 'theme-toggle',\n      label: 'テーマ切替',\n      description: 'ダークテーマとライトテーマを切り替えます',\n      icon: <Palette size={16} className=\"text-yellow-400\" />,\n      action: () => {\n        console.log('テーマ切替')\n        onClose()\n      },\n      keywords: ['テーマ', 'theme', '切替', 'toggle', 'ダーク', 'dark', 'ライト', 'light']\n    }\n  ]\n\n  const filteredCommands = query\n    ? commands.filter(command => {\n        const searchTerms = query.toLowerCase().split(' ')\n        return searchTerms.every(term =>\n          command.label.toLowerCase().includes(term) ||\n          command.description?.toLowerCase().includes(term) ||\n          command.keywords?.some(keyword => keyword.toLowerCase().includes(term))\n        )\n      })\n    : commands\n\n  useEffect(() => {\n    if (isOpen) {\n      setQuery('')\n      setSelectedIndex(0)\n      setTimeout(() => inputRef.current?.focus(), 100)\n    }\n  }, [isOpen])\n\n  useEffect(() => {\n    setSelectedIndex(0)\n  }, [query])\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isOpen) return\n\n      switch (e.key) {\n        case 'Escape':\n          onClose()\n          break\n        case 'ArrowDown':\n          e.preventDefault()\n          setSelectedIndex(prev => \n            prev < filteredCommands.length - 1 ? prev + 1 : 0\n          )\n          break\n        case 'ArrowUp':\n          e.preventDefault()\n          setSelectedIndex(prev => \n            prev > 0 ? prev - 1 : filteredCommands.length - 1\n          )\n          break\n        case 'Enter':\n          e.preventDefault()\n          if (filteredCommands[selectedIndex]) {\n            filteredCommands[selectedIndex].action()\n          }\n          break\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [isOpen, selectedIndex, filteredCommands, onClose])\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-[10vh]\">\n      <div className=\"w-full max-w-2xl bg-card border border-border rounded-2xl shadow-2xl overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-border\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex items-center gap-2 text-gray-500\">\n              <Command size={16} />\n              <span className=\"text-sm\">コマンドパレット</span>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-3 mt-3\">\n            <Search size={16} className=\"text-gray-500\" />\n            <input\n              ref={inputRef}\n              type=\"text\"\n              placeholder=\"コマンドを検索... (タイプして絞り込み)\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              className=\"flex-1 bg-transparent text-foreground placeholder-gray-500 outline-none text-lg\"\n            />\n          </div>\n        </div>\n\n        {/* Commands List */}\n        <div \n          ref={listRef}\n          className=\"max-h-96 overflow-y-auto\"\n        >\n          {filteredCommands.length > 0 ? (\n            filteredCommands.map((command, index) => (\n              <button\n                key={command.id}\n                onClick={command.action}\n                className={`w-full flex items-center gap-4 p-4 text-left hover:bg-background transition-colors ${\n                  index === selectedIndex ? 'bg-background' : ''\n                }`}\n              >\n                <div className=\"flex-shrink-0\">\n                  {command.icon}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"font-medium text-foreground\">\n                    {command.label}\n                  </div>\n                  {command.description && (\n                    <div className=\"text-sm text-gray-500 truncate\">\n                      {command.description}\n                    </div>\n                  )}\n                </div>\n                {index === selectedIndex && (\n                  <div className=\"text-xs text-gray-500 bg-background px-2 py-1 rounded border\">\n                    Enter\n                  </div>\n                )}\n              </button>\n            ))\n          ) : (\n            <div className=\"p-8 text-center text-gray-500\">\n              <Search size={24} className=\"mx-auto mb-3 opacity-50\" />\n              <p>該当するコマンドが見つかりませんでした</p>\n              <p className=\"text-sm mt-1\">別のキーワードで検索してみてください</p>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-3 bg-background border-t border-border\">\n          <div className=\"flex items-center justify-between text-xs text-gray-500\">\n            <div className=\"flex items-center gap-4\">\n              <span className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-card border border-border rounded text-xs\">↑</kbd>\n                <kbd className=\"px-1.5 py-0.5 bg-card border border-border rounded text-xs\">↓</kbd>\n                移動\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-card border border-border rounded text-xs\">Enter</kbd>\n                実行\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-card border border-border rounded text-xs\">Esc</kbd>\n                閉じる\n              </span>\n            </div>\n            <span>{filteredCommands.length} 件</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;AA+BO,SAAS,eAAe,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAuB;IAChF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+OAAQ,EAAC;IACnC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+OAAQ,EAAC;IACnD,MAAM,WAAW,IAAA,6OAAM,EAAmB;IAC1C,MAAM,UAAU,IAAA,6OAAM,EAAiB;IAEvC,MAAM,WAAsB;QAC1B;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,wOAAI;gBAAC,MAAM;gBAAI,WAAU;;;;;;YAChC,QAAQ;gBACN;gBACA;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAM;gBAAO;gBAAM;gBAAM;gBAAM;gBAAQ;gBAAS;aAAU;QAC7E;QACA;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,8OAAM;gBAAC,MAAM;gBAAI,WAAU;;;;;;YAClC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAU;aAAK;QAClC;QACA;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,oPAAQ;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACpC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAW;gBAAS;gBAAQ;aAAO;QACtD;QACA;YACE,IAAI;YACJ,OAAO;YACP,oBAAM,4QAAC,oPAAQ;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACpC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAW;gBAAM;gBAAQ;aAAO;QACnD;QACA;YACE,IAAI;YACJ,OAAO;YACP,oBAAM,4QAAC,oPAAQ;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACpC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAY;gBAAM;gBAAQ;aAAO;QACpD;QACA;YACE,IAAI;YACJ,OAAO;YACP,oBAAM,4QAAC,oPAAQ;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACpC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAM;gBAAS;gBAAM;gBAAQ;aAAO;QACjD;QACA;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,oPAAQ;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACpC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAU;gBAAU;gBAAQ;aAAW;QACpD;QACA;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,8OAAM;gBAAC,MAAM;gBAAI,WAAU;;;;;;YAClC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAS;gBAAU;gBAAQ;aAAS;QACjD;QACA;YACE,IAAI;YACJ,OAAO;YACP,aAAa;YACb,oBAAM,4QAAC,iPAAO;gBAAC,MAAM;gBAAI,WAAU;;;;;;YACnC,QAAQ;gBACN,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,UAAU;gBAAC;gBAAO;gBAAS;gBAAM;gBAAU;gBAAO;gBAAQ;gBAAO;aAAQ;QAC3E;KACD;IAED,MAAM,mBAAmB,QACrB,SAAS,MAAM,CAAC,CAAA;QACd,MAAM,cAAc,MAAM,WAAW,GAAG,KAAK,CAAC;QAC9C,OAAO,YAAY,KAAK,CAAC,CAAA,OACvB,QAAQ,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,SACrC,QAAQ,WAAW,EAAE,cAAc,SAAS,SAC5C,QAAQ,QAAQ,EAAE,KAAK,CAAA,UAAW,QAAQ,WAAW,GAAG,QAAQ,CAAC;IAErE,KACA;IAEJ,IAAA,gPAAS,EAAC;QACR,IAAI,QAAQ;YACV,SAAS;YACT,iBAAiB;YACjB,WAAW,IAAM,SAAS,OAAO,EAAE,SAAS;QAC9C;IACF,GAAG;QAAC;KAAO;IAEX,IAAA,gPAAS,EAAC;QACR,iBAAiB;IACnB,GAAG;QAAC;KAAM;IAEV,IAAA,gPAAS,EAAC;QACR,MAAM,gBAAgB,CAAC;YACrB,IAAI,CAAC,QAAQ;YAEb,OAAQ,EAAE,GAAG;gBACX,KAAK;oBACH;oBACA;gBACF,KAAK;oBACH,EAAE,cAAc;oBAChB,iBAAiB,CAAA,OACf,OAAO,iBAAiB,MAAM,GAAG,IAAI,OAAO,IAAI;oBAElD;gBACF,KAAK;oBACH,EAAE,cAAc;oBAChB,iBAAiB,CAAA,OACf,OAAO,IAAI,OAAO,IAAI,iBAAiB,MAAM,GAAG;oBAElD;gBACF,KAAK;oBACH,EAAE,cAAc;oBAChB,IAAI,gBAAgB,CAAC,cAAc,EAAE;wBACnC,gBAAgB,CAAC,cAAc,CAAC,MAAM;oBACxC;oBACA;YACJ;QACF;QAEA,SAAS,gBAAgB,CAAC,WAAW;QACrC,OAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;IACvD,GAAG;QAAC;QAAQ;QAAe;QAAkB;KAAQ;IAErD,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,4QAAC;QAAI,WAAU;kBACb,cAAA,4QAAC;YAAI,WAAU;;8BAEb,4QAAC;oBAAI,WAAU;;sCACb,4QAAC;4BAAI,WAAU;sCACb,cAAA,4QAAC;gCAAI,WAAU;;kDACb,4QAAC,iPAAO;wCAAC,MAAM;;;;;;kDACf,4QAAC;wCAAK,WAAU;kDAAU;;;;;;;;;;;;;;;;;sCAG9B,4QAAC;4BAAI,WAAU;;8CACb,4QAAC,8OAAM;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC5B,4QAAC;oCACC,KAAK;oCACL,MAAK;oCACL,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAU;;;;;;;;;;;;;;;;;;8BAMhB,4QAAC;oBACC,KAAK;oBACL,WAAU;8BAET,iBAAiB,MAAM,GAAG,IACzB,iBAAiB,GAAG,CAAC,CAAC,SAAS,sBAC7B,4QAAC;4BAEC,SAAS,QAAQ,MAAM;4BACvB,WAAW,CAAC,mFAAmF,EAC7F,UAAU,gBAAgB,kBAAkB,IAC5C;;8CAEF,4QAAC;oCAAI,WAAU;8CACZ,QAAQ,IAAI;;;;;;8CAEf,4QAAC;oCAAI,WAAU;;sDACb,4QAAC;4CAAI,WAAU;sDACZ,QAAQ,KAAK;;;;;;wCAEf,QAAQ,WAAW,kBAClB,4QAAC;4CAAI,WAAU;sDACZ,QAAQ,WAAW;;;;;;;;;;;;gCAIzB,UAAU,+BACT,4QAAC;oCAAI,WAAU;8CAA+D;;;;;;;2BApB3E,QAAQ,EAAE;;;;kDA2BnB,4QAAC;wBAAI,WAAU;;0CACb,4QAAC,8OAAM;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC5B,4QAAC;0CAAE;;;;;;0CACH,4QAAC;gCAAE,WAAU;0CAAe;;;;;;;;;;;;;;;;;8BAMlC,4QAAC;oBAAI,WAAU;8BACb,cAAA,4QAAC;wBAAI,WAAU;;0CACb,4QAAC;gCAAI,WAAU;;kDACb,4QAAC;wCAAK,WAAU;;0DACd,4QAAC;gDAAI,WAAU;0DAA6D;;;;;;0DAC5E,4QAAC;gDAAI,WAAU;0DAA6D;;;;;;4CAAO;;;;;;;kDAGrF,4QAAC;wCAAK,WAAU;;0DACd,4QAAC;gDAAI,WAAU;0DAA6D;;;;;;4CAAW;;;;;;;kDAGzF,4QAAC;wCAAK,WAAU;;0DACd,4QAAC;gDAAI,WAAU;0DAA6D;;;;;;4CAAS;;;;;;;;;;;;;0CAIzF,4QAAC;;oCAAM,iBAAiB,MAAM;oCAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3C","debugId":null}},
    {"offset": {"line": 4042, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/hooks/useKeyboardShortcuts.ts"],"sourcesContent":["'use client'\n\nimport { useEffect, useCallback } from 'react'\n\nexport interface KeyboardShortcutHandlers {\n  onCommandPalette: () => void\n  onNewItem: () => void\n  onEdit: () => void\n  onDelete: () => void\n  onUndo: () => void\n  onRedo: () => void\n  onSearch: () => void\n  onEscape: () => void\n  onArrowUp: () => void\n  onArrowDown: () => void\n  onEnter: () => void\n}\n\nexport function useKeyboardShortcuts(handlers: Partial<KeyboardShortcutHandlers>) {\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\n    const ctrlKey = isMac ? e.metaKey : e.ctrlKey\n\n    // Command Palette (Ctrl/Cmd + K)\n    if (ctrlKey && e.key === 'k') {\n      e.preventDefault()\n      handlers.onCommandPalette?.()\n      return\n    }\n\n    // New Item (N key, when not in input)\n    if (e.key === 'n' || e.key === 'N') {\n      const target = e.target as HTMLElement\n      if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(target.tagName)) {\n        e.preventDefault()\n        handlers.onNewItem?.()\n        return\n      }\n    }\n\n    // Edit (E key, when not in input)\n    if (e.key === 'e' || e.key === 'E') {\n      const target = e.target as HTMLElement\n      if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(target.tagName)) {\n        e.preventDefault()\n        handlers.onEdit?.()\n        return\n      }\n    }\n\n    // Delete (Del key, when not in input)\n    if (e.key === 'Delete') {\n      const target = e.target as HTMLElement\n      if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(target.tagName)) {\n        e.preventDefault()\n        handlers.onDelete?.()\n        return\n      }\n    }\n\n    // Undo (Ctrl/Cmd + Z)\n    if (ctrlKey && e.key === 'z' && !e.shiftKey) {\n      e.preventDefault()\n      handlers.onUndo?.()\n      return\n    }\n\n    // Redo (Ctrl/Cmd + Y or Ctrl/Cmd + Shift + Z)\n    if ((ctrlKey && e.key === 'y') || (ctrlKey && e.key === 'z' && e.shiftKey)) {\n      e.preventDefault()\n      handlers.onRedo?.()\n      return\n    }\n\n    // Search (/ key, when not in input)\n    if (e.key === '/') {\n      const target = e.target as HTMLElement\n      if (!['INPUT', 'TEXTAREA', 'SELECT'].includes(target.tagName)) {\n        e.preventDefault()\n        handlers.onSearch?.()\n        return\n      }\n    }\n\n    // Navigation keys\n    switch (e.key) {\n      case 'Escape':\n        handlers.onEscape?.()\n        break\n      case 'ArrowUp':\n        const isInTable = (e.target as HTMLElement).closest('table, [role=\"table\"]')\n        if (isInTable) {\n          e.preventDefault()\n          handlers.onArrowUp?.()\n        }\n        break\n      case 'ArrowDown':\n        const isInTableDown = (e.target as HTMLElement).closest('table, [role=\"table\"]')\n        if (isInTableDown) {\n          e.preventDefault()\n          handlers.onArrowDown?.()\n        }\n        break\n      case 'Enter':\n        const isInTableEnter = (e.target as HTMLElement).closest('table, [role=\"table\"]')\n        if (isInTableEnter && !['INPUT', 'TEXTAREA', 'BUTTON'].includes((e.target as HTMLElement).tagName)) {\n          e.preventDefault()\n          handlers.onEnter?.()\n        }\n        break\n    }\n  }, [handlers])\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [handleKeyDown])\n\n  // Return helper function to check if key combination is pressed\n  const isShortcut = useCallback((key: string, ctrlKey?: boolean) => {\n    return (e: KeyboardEvent) => {\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\n      const isCtrl = isMac ? e.metaKey : e.ctrlKey\n      \n      if (ctrlKey !== undefined && isCtrl !== ctrlKey) return false\n      return e.key === key\n    }\n  }, [])\n\n  return { isShortcut }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taich_k1zr258/App/learning-tracker/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { MonthSidebar } from '@/components/MonthSidebar'\nimport { MainTable } from '@/components/MainTable'\nimport { RightDrawer } from '@/components/RightDrawer'\nimport { CommandPalette } from '@/components/CommandPalette'\nimport { NewItemDialog } from '@/components/NewItemDialog'\nimport { useKeyboardShortcuts } from '@/hooks/useKeyboardShortcuts'\nimport { useAppStore } from '@/store/useAppStore'\n\nexport default function Home() {\n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false)\n  const [isNewItemDialogOpen, setIsNewItemDialogOpen] = useState(false)\n  \n  // Zustand store\n  const selectedItem = useAppStore((state) => state.selectedItem)\n  const selectedMonth = useAppStore((state) => state.selectedMonth)\n  const setSelectedItem = useAppStore((state) => state.setSelectedItem)\n  const setSelectedMonth = useAppStore((state) => state.setSelectedMonth)\n  const undo = useAppStore((state) => state.undo)\n  const redo = useAppStore((state) => state.redo)\n  const canUndo = useAppStore((state) => state.canUndo)\n  const canRedo = useAppStore((state) => state.canRedo)\n\n  // Keyboard shortcuts\n  useKeyboardShortcuts({\n    onCommandPalette: () => setIsCommandPaletteOpen(true),\n    onNewItem: () => setIsNewItemDialogOpen(true),\n    onEscape: () => {\n      if (selectedItem) {\n        setSelectedItem(null)\n      } else if (isCommandPaletteOpen) {\n        setIsCommandPaletteOpen(false)\n      } else if (isNewItemDialogOpen) {\n        setIsNewItemDialogOpen(false)\n      }\n    },\n    onUndo: () => {\n      if (canUndo()) {\n        undo()\n      }\n    },\n    onRedo: () => {\n      if (canRedo()) {\n        redo()\n      }\n    }\n  })\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <MonthSidebar \n        selectedMonth={selectedMonth}\n        onMonthSelect={setSelectedMonth}\n      />\n      \n      <div className=\"flex-1 flex\">\n        <MainTable \n          selectedMonth={selectedMonth}\n          selectedItem={selectedItem}\n          onItemSelect={setSelectedItem}\n        />\n        \n        {selectedItem && (\n          <RightDrawer \n            itemId={selectedItem}\n            onClose={() => setSelectedItem(null)}\n          />\n        )}\n      </div>\n\n      <CommandPalette \n        isOpen={isCommandPaletteOpen}\n        onClose={() => setIsCommandPaletteOpen(false)}\n        onNewItem={() => setIsNewItemDialogOpen(true)}\n      />\n\n      <NewItemDialog\n        isOpen={isNewItemDialogOpen}\n        onClose={() => setIsNewItemDialogOpen(false)}\n      />\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWe,SAAS;IACtB,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,+OAAQ,EAAC;IACjE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,+OAAQ,EAAC;IAE/D,gBAAgB;IAChB,MAAM,eAAe,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,YAAY;IAC9D,MAAM,gBAAgB,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,aAAa;IAChE,MAAM,kBAAkB,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,eAAe;IACpE,MAAM,mBAAmB,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,gBAAgB;IACtE,MAAM,OAAO,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,IAAI;IAC9C,MAAM,OAAO,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,IAAI;IAC9C,MAAM,UAAU,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,OAAO;IACpD,MAAM,UAAU,IAAA,wKAAW,EAAC,CAAC,QAAU,MAAM,OAAO;IAEpD,qBAAqB;IACrB,IAAA,0LAAoB,EAAC;QACnB,kBAAkB,IAAM,wBAAwB;QAChD,WAAW,IAAM,uBAAuB;QACxC,UAAU;YACR,IAAI,cAAc;gBAChB,gBAAgB;YAClB,OAAO,IAAI,sBAAsB;gBAC/B,wBAAwB;YAC1B,OAAO,IAAI,qBAAqB;gBAC9B,uBAAuB;YACzB;QACF;QACA,QAAQ;YACN,IAAI,WAAW;gBACb;YACF;QACF;QACA,QAAQ;YACN,IAAI,WAAW;gBACb;YACF;QACF;IACF;IAEA,qBACE,4QAAC;QAAI,WAAU;;0BACb,4QAAC,gLAAY;gBACX,eAAe;gBACf,eAAe;;;;;;0BAGjB,4QAAC;gBAAI,WAAU;;kCACb,4QAAC,0KAAS;wBACR,eAAe;wBACf,cAAc;wBACd,cAAc;;;;;;oBAGf,8BACC,4QAAC,8KAAW;wBACV,QAAQ;wBACR,SAAS,IAAM,gBAAgB;;;;;;;;;;;;0BAKrC,4QAAC,oLAAc;gBACb,QAAQ;gBACR,SAAS,IAAM,wBAAwB;gBACvC,WAAW,IAAM,uBAAuB;;;;;;0BAG1C,4QAAC,kLAAa;gBACZ,QAAQ;gBACR,SAAS,IAAM,uBAAuB;;;;;;;;;;;;AAI9C","debugId":null}}]
}